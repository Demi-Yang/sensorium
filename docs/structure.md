## 程序目标
- 深度解耦合
- 可读性
- 可配置性
- 重试
- 超时
- 版本

## 实现思路
- 文件内部功能单一化：一个文件一个类，实现一种功能，不把过多的功能聚合在一起，增加可读性和可维护性。使用node的require和export来维护文件依赖。
- 好的代码应该是简洁的，单元功能独立，可读性强，用代码来解释文档

## 技术路线
- nodejs书写
- webpack
- ejs6 类的语法
- 学习接口的写法，restful api

## 功能部分
- 连接部分
    - 蓝牙连接
    - 2.4G连接
    - wifi连接
- 主板部分
- 协议部分
- 发送指令
    - send
    - 重试
- 解析指令
    - parse asciima
    - parseGcode
    - 结果

## 类的划分
- Command
    - 说明：发送指令
    - 属性
    - 方法
        - send
        - doSend
        - parse
        - doParse
- MainBoards
有一个主板类，
    - 方法：
        - 获取固件版本号
        - 获取主板名称
- 定义每个电子模块的基本协议格式
    - 名称
    - 设备类型
    -

### 程序结构
- docs/ 文档
- lib/ 主要源码部分
    - protocol/ 各主控板协议定义
        - common/ 各平台都一致的模块
        - mcore/
        - orion/
        - auriga/
        - megaPi/
    - driver/ 各平台api驱动逻辑
- test/ 测试相关
- package.json
- README.md

协议部分中使用文件夹在组织模块，是为了使程序结构更小单元。


## 协议列表

### 读命令
1. 软件版本号
1. 超声波传感器
1. 温度传感器(18B20)
1. 光线传感器
1. 电位器
1. 摇杆
1. 姿态传感器(MPU6050)
1. 音量传感器(MIC)
1. 温度传感器(板载)
1. 红外传感器
1. 被动式红外探测器
1. 寻线传感器
1. 限位器
1. 电子罗盘
1. 温湿度传感器
1. 火焰传感器
1. 气体传感器
1. 读取数字管脚的值
1. 读取模拟管脚的
1. 读取管脚的脉冲持续时间
1. 双管脚超声波传感器
1. 固件运行时间
1. 触摸传感器
1. 4按键模块
1. 编码电机(板载)
1. 主板通用命令

### 执行命令
1. 直流电机
1. 编码电机(板载）
1. 摇杆1
1. 摇杆2
1. 步进电机
1. RGB LED灯
1. 主板通用命令
1. 数字舵机
1. 四位七段数码管
1. 表情面板
1. 光线灰度传感器
1. 快门线模块
1. 设置数字管脚
1. 设置PWM输出
1. 设置TONE输出
1. 数字舵机2
1. 固件运行时间
1. 编码电机(外接)


### 代码规范
- 4个空格代替tab
- 注释采用jsDoc规范
- 文件名称统一采用`_`连接


### 参考资源
- [api 书写格式](http://johnny-five.io/examples/sensor/)



### 步骤
- []熟悉es6的基本语法，学习使用babel
- []构建文件结构
- []定义基本类
- []使用打包，完成web部分的支持，命名为sensorium.js
- []跑通蓝牙部分


先写一个完整的主线，然后从该代码结构中拆分各模块，形成

发应该和收放在同一个类中（这是主线）

发送一条指令过程：
1. 触发command中的send
2. 从protocol + electronic 组织成具体的协议
3. 调用command中的doSend 进行发送
